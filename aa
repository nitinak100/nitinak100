php
Copy code
$servername = "localhost";
$username = "username";
$password = "password";
$dbname = "database_name";

$conn = new mysqli($servername, $username, $password, $dbname);

// Check connection
if ($conn->connect_error) {
  die("Connection failed: " . $conn->connect_error);
}

$billAmount = isset($_POST['billAmount']) ? $_POST['billAmount'] : '';
$discountCode = isset($_POST['discountCode']) ? $_POST['discountCode'] : '';

if ($billAmount && $discountCode) {
  $sql = "SELECT * FROM discounts WHERE code = '$discountCode'";
  $result = $conn->query($sql);

  if ($result->num_rows > 0) {
    $row = $result->fetch_assoc();
    $discount = $row['discount'];
    $discountedAmount = $billAmount - ($billAmount * $discount / 100);

    $sql = "UPDATE bills SET amount = $discountedAmount WHERE id = 1";
    $conn->query($sql);

    echo "Discount Applied: " . $discount . "%<br>";
    echo "Discounted Amount: " . $discountedAmount . "<br>";
  } else {
    echo "Invalid Discount Code.";
  }
} else {
  echo "Please enter bill amount and discount code to apply discount.";
}

$conn->close();
In this code, we first establish a connection to a MySQL database using the mysqli class. We then check whether the billAmount and discountCode variables are set using the isset() function and the $_POST global variable.

If these variables are set, we execute a MySQL query to retrieve the discount percentage from the discounts table based on the provided discountCode. If a discount with the given code is found, we calculate the discountedAmount by subtracting the product of billAmount and the discount percentage from billAmount. We then update the amount column in the bills table with the discounted amount using another MySQL query.

If the provided discount code is not found, we display an error message. If either of the required variables is not set, we display a message asking the user to enter the required information.

You would need to create two MySQL tables - one for storing the bills and another for storing the discount codes and their corresponding discounts. For example, you could use the following SQL statements to create these tables:

sql
Copy code
CREATE TABLE bills (
  id INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
  amount FLOAT(10, 2) NOT NULL
);

CREATE TABLE discounts (
  id INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
  code VARCHAR(10) NOT NULL,
  discount FLOAT(4, 2) NOT NULL
);
To integrate this code with an HTML form, you could use the following code:

html
Copy code
<form action="apply-discount.php" method="post">
  <label for="billAmount">Bill Amount:</label>
  <input type="number" id="billAmount" name="billAmount" required>
  <br>
  <label for="discountCode">Discount Code:</label>
  <input type="text" id="discountCode" name="discountCode" required>
  <br>
  <input type="submit" value="Apply Discount">
</form>
